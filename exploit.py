import subprocess, sys

def get_interface():
    result = subprocess.run(['which', 'aircrack-ng'], capture_output=True, text=True).stdout
    if not result:
        print("Install aircrack-ng first")
        print("sudo apt-get install aircrack-ng")
        return
    result = subprocess.check_output(['sudo', 'airmon-ng']).decode("utf-8").split('\n')
    result = list(filter(None, result))
    labels = result[0].split()
    index = labels.index("Interface")
    return result[1].split()[index]

def exploit(network):
    interface = get_interface()
    #subprocess.call(['sudo', 'airmon-ng', 'check', 'kill'], stdout=subprocess.DEVNULL, stderr=subprocess.STDOUT)
    result = subprocess.check_output(['sudo', 'airmon-ng', 'start', interface]).decode("utf-8")
    print(result)

if __name__ == "__main__":
    if len(sys.argv) != 2:
        exit(1)
    else:
        exploit(sys.argv[1])
